<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #1a73e8;
            --primary-dark: #0d47a1;
            --accent: #ff9800;
            --success: #4caf50;
            --danger: #f44336;
            --warning: #ffc107;
            --info: #2196f3;
            --light-bg: #f5f7fa;
            --white: #ffffff;
            --text: #333;
            --border: #e0e0e0;
        }

        body {
            background-color: var(--light-bg);
            color: var(--text);
            line-height: 1.6;
        }

        .container-fluid {
            display: flex;
            height: 100vh;
        }

        /* ===== Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ ===== */
        .sidebar {
            width: 280px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 20px;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
            overflow-y: auto;
            position: fixed;
            height: 100vh;
            right: 0;
            z-index: 1000;
        }

        .sidebar-header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.3);
            padding-bottom: 15px;
        }

        .sidebar-header h2 {
            font-size: 1.3rem;
            margin-bottom: 5px;
        }

        .sidebar-header p {
            font-size: 0.8rem;
            opacity: 0.9;
        }

        .sidebar-nav {
            list-style: none;
        }

        .sidebar-nav li {
            margin-bottom: 10px;
        }

        .sidebar-nav a {
            display: block;
            padding: 12px 15px;
            color: rgba(255, 255, 255, 0.9);
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s;
            cursor: pointer;
        }

        .sidebar-nav a:hover,
        .sidebar-nav a.active {
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            padding-right: 20px;
        }

        .sidebar-footer {
            position: absolute;
            bottom: 20px;
            width: calc(100% - 40px);
            text-align: center;
            border-top: 1px solid rgba(255, 255, 255, 0.3);
            padding-top: 15px;
        }

        .user-info {
            text-align: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 8px;
            font-size: 1.5rem;
        }

        /* ===== Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ ===== */
        .main-content {
            flex: 1;
            margin-right: 280px;
            overflow-y: auto;
            padding: 30px;
        }

        .header {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 2rem;
            color: var(--primary);
        }

        .header-right {
            display: flex;
            gap: 15px;
        }

        /* ===== Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„ØªØ¨ÙˆÙŠØ¨ ===== */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--border);
        }

        .tab-btn {
            padding: 12px 20px;
            background: transparent;
            border: none;
            cursor: pointer;
            color: var(--text);
            font-weight: 600;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
            font-size: 1rem;
        }

        .tab-btn:hover {
            color: var(--primary);
        }

        .tab-btn.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* ===== Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª ===== */
        .card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--light-bg);
        }

        .card-title {
            font-size: 1.3rem;
            color: var(--primary);
            font-weight: 700;
        }

        /* ===== Ø§Ù„Ø£Ø²Ø±Ø§Ø± ===== */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            font-size: 0.95rem;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background-color: var(--accent);
            color: white;
        }

        .btn-secondary:hover {
            background-color: #f57c00;
        }

        .btn-success {
            background-color: var(--success);
            color: white;
        }

        .btn-danger {
            background-color: var(--danger);
            color: white;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 0.85rem;
        }

        /* ===== Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ ===== */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        /* ===== Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ ===== */
        .table-responsive {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        table thead {
            background-color: var(--light-bg);
        }

        table th {
            padding: 15px;
            text-align: right;
            font-weight: 700;
            color: var(--primary);
            border-bottom: 2px solid var(--border);
        }

        table td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--border);
        }

        table tbody tr:hover {
            background-color: #fafafa;
        }

        .status-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .status-active {
            background-color: #e8f5e9;
            color: #2e7d32;
        }

        .status-inactive {
            background-color: #ffebee;
            color: #c62828;
        }

        .status-admin {
            background-color: #e3f2fd;
            color: #1565c0;
        }

        .status-user {
            background-color: #f3e5f5;
            color: #6a1b9a;
        }

        /* ===== Ø§Ù„Ù€ Stats ===== */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border-right: 5px solid var(--primary);
        }

        .stat-label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 10px;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
        }

        .stat-trend {
            font-size: 0.8rem;
            color: var(--success);
            margin-top: 8px;
        }

        /* ===== Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© ===== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--primary);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }

        .modal-footer {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 20px;
            border-top: 1px solid var(--border);
            padding-top: 15px;
        }

        /* ===== Ø§Ù„Ø¥Ù†Ø°Ø§Ø±Ø§Øª ===== */
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .alert-success {
            background-color: #e8f5e9;
            color: #2e7d32;
            border-right: 4px solid var(--success);
        }

        .alert-danger {
            background-color: #ffebee;
            color: #c62828;
            border-right: 4px solid var(--danger);
        }

        .alert-warning {
            background-color: #fff3e0;
            color: #e65100;
            border-right: 4px solid var(--warning);
        }

        /* ===== Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¯Ø®ÙˆÙ„ ===== */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        }

        .login-form {
            background: white;
            padding: 40px;
            border-radius: 10px;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .login-form h1 {
            text-align: center;
            color: var(--primary);
            margin-bottom: 30px;
        }

        /* ===== Responsive ===== */
        @media (max-width: 768px) {
            .sidebar {
                width: 0;
                padding: 0;
            }

            .main-content {
                margin-right: 0;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            table {
                font-size: 0.9rem;
            }

            table th, table td {
                padding: 10px;
            }
        }

        .toggle-sidebar {
            display: none;
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .toggle-sidebar {
                display: block;
            }
        }

        /* ===== Ø¥Ø¶Ø§ÙØ§Øª ===== */
        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .breadcrumb {
            margin-bottom: 20px;
            font-size: 0.9rem;
            color: #666;
        }

        .breadcrumb a {
            color: var(--primary);
            text-decoration: none;
            cursor: pointer;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: #999;
        }

        .empty-state p {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <!-- ===== Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ ===== -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>âš™ï¸ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
                <p>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡</p>
            </div>

            <ul class="sidebar-nav">
                <li><a class="nav-link active" onclick="switchTab('dashboard')">ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</a></li>
                <li><a class="nav-link" onclick="switchTab('facilities')">ğŸ¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†Ø´Ø¢Øª</a></li>
                <li><a class="nav-link" onclick="switchTab('users')">ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</a></li>
                <li><a class="nav-link" onclick="switchTab('kpis')">ğŸ“ˆ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª</a></li>
                <li><a class="nav-link" onclick="switchTab('permissions')">ğŸ”’ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª</a></li>
                <li><a class="nav-link" onclick="switchTab('reports')">ğŸ“‹ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</a></li>
            </ul>

            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar">ğŸ‘¤</div>
                    <div style="font-size: 0.9rem;">
                        <div id="currentUser">Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…</div>
                        <div style="font-size: 0.8rem; opacity: 0.9;">Administrator</div>
                    </div>
                </div>
                <button class="btn btn-danger" style="width: 100%;" onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
            </div>
        </aside>

        <!-- ===== Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ ===== -->
        <main class="main-content">
            <!-- ===== Ø§Ù„Ø±Ø£Ø³ ===== -->
            <div class="header">
                <h1 id="pageTitle">ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</h1>
                <div class="header-right">
                    <button class="toggle-sidebar" onclick="toggleSidebar()">â˜°</button>
                </div>
            </div>

            <!-- ===== ØªØ¨ÙˆÙŠØ¨ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ===== -->
            <div id="dashboard" class="tab-content active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†Ø´Ø¢Øª</div>
                        <div class="stat-number" id="facilitiesCount">0</div>
                        <div class="stat-trend">âœ… Ù†Ø´Ø·Ø©</div>
                    </div>
                    <div class="stat-card" style="border-right-color: #ff9800;">
                        <div class="stat-label">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</div>
                        <div class="stat-number" id="usersCount">0</div>
                        <div class="stat-trend">ğŸ‘¥ Ù…Ø³Ø¬Ù„ÙŠÙ†</div>
                    </div>
                    <div class="stat-card" style="border-right-color: #4caf50;">
                        <div class="stat-label">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª</div>
                        <div class="stat-number" id="kpisCount">0</div>
                        <div class="stat-trend">ğŸ“Š ÙƒØ§Ù…Ù„ Ø§Ù„Ù†Ø¸Ø§Ù…</div>
                    </div>
                    <div class="stat-card" style="border-right-color: #2196f3;">
                        <div class="stat-label">Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø®Ù„Ø©</div>
                        <div class="stat-number" id="dataCount">0</div>
                        <div class="stat-trend">ğŸ’¾ Ù…Ø­ÙÙˆØ¸Ø©</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">ğŸ“ˆ Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø£Ø®ÙŠØ±</div>
                    </div>
                    <div id="recentActivity">
                        <p style="text-align: center; color: #999;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ù†Ø´Ø·Ø© Ø¨Ø¹Ø¯</p>
                    </div>
                </div>
            </div>

            <!-- ===== ØªØ¨ÙˆÙŠØ¨ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†Ø´Ø¢Øª ===== -->
            <div id="facilities" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">ğŸ¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†Ø´Ø¢Øª</div>
                        <button class="btn btn-primary" onclick="openAddFacilityModal()">â• Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø´Ø£Ø©</button>
                    </div>

                    <div class="table-responsive">
                        <table id="facilitiesTable">
                            <thead>
                                <tr>
                                    <th>Ø§Ù„ÙƒÙˆØ¯</th>
                                    <th>Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø´Ø£Ø©</th>
                                    <th>Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†Ø´Ø£Ø©</th>
                                    <th>Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</th>
                                    <th>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</th>
                                    <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                                    <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- ===== ØªØ¨ÙˆÙŠØ¨ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ===== -->
            <div id="users" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</div>
                        <button class="btn btn-primary" onclick="openAddUserModal()">â• Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù…</button>
                    </div>

                    <div class="table-responsive">
                        <table id="usersTable">
                            <thead>
                                <tr>
                                    <th>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th>
                                    <th>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</th>
                                    <th>Ø§Ù„Ù…Ù†Ø´Ø£Ø©</th>
                                    <th>Ø§Ù„Ø¯ÙˆØ±</th>
                                    <th>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„</th>
                                    <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                                    <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- ===== ØªØ¨ÙˆÙŠØ¨ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª ===== -->
            <div id="kpis" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">ğŸ“ˆ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª</div>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <input type="text" placeholder="ğŸ” Ø¨Ø­Ø« Ø¹Ù† Ù…Ø¤Ø´Ø±..." id="kpiSearch" 
                                   onkeyup="searchKPIs()" style="width: 250px;">
                            
                            <select id="categoryFilter" onchange="filterKPIs()" style="padding: 10px;">
                                <option value="">ÙƒÙ„ Ø§Ù„ÙØ¦Ø§Øª</option>
                                <option value="WFM">WFM</option>
                                <option value="UTZ">UTZ</option>
                                <option value="MP">MP</option>
                                <option value="PHC">PHC</option>
                                <option value="IPC">IPC</option>
                                <option value="PS">PS</option>
                                <option value="OHS">OHS</option>
                                <option value="MM">MM</option>
                                <option value="LAB">LAB</option>
                                <option value="DF">DF</option>
                            </select>
                            
                            <button class="btn btn-primary" onclick="openAddKPIForm()">â• Ø¥Ø¶Ø§ÙØ© Ù…Ø¤Ø´Ø±</button>
                        </div>
                    </div>

                    <div class="table-responsive">
                        <table id="kpisTable">
                            <thead>
                                <tr>
                                    <th>Ø§Ù„ÙƒÙˆØ¯</th>
                                    <th>Ø§Ø³Ù… Ø§Ù„Ù…Ø¤Ø´Ø±</th>
                                    <th>Ø§Ù„ÙØ¦Ø©</th>
                                    <th>Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¤Ø´Ø±</th>
                                    <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- ===== ØªØ¨ÙˆÙŠØ¨ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª ===== -->
            <div id="permissions" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">ğŸ”’ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª</div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
                            <select id="permissionUser" onchange="loadUserPermissions()">
                                <option value="">-- Ø§Ø®ØªØ± Ù…Ø³ØªØ®Ø¯Ù…Ø§Ù‹ --</option>
                            </select>
                        </div>
                    </div>

                    <div id="permissionsContainer"></div>
                </div>
            </div>

            <!-- ===== ØªØ¨ÙˆÙŠØ¨ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ===== -->
            <div id="reports" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">ğŸ“‹ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Ù†ÙˆØ¹ Ø§Ù„ØªÙ‚Ø±ÙŠØ±</label>
                            <select id="reportType">
                                <option value="facilities">ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ù†Ø´Ø¢Øª</option>
                                <option value="users">ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</option>
                                <option value="activity">ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù†Ø´Ø§Ø·</option>
                                <option value="data">ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø®Ù„Ø©</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Ø§Ù„Ù…Ù†Ø´Ø£Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                            <select id="reportFacility">
                                <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†Ø´Ø¢Øª</option>
                            </select>
                        </div>
                    </div>

                    <button class="btn btn-primary" onclick="generateReport()">ğŸ“¥ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
                    <button class="btn btn-secondary" onclick="exportReport()">ğŸ’¾ ØªØµØ¯ÙŠØ± CSV</button>
                </div>
            </div>
        </main>
    </div>

    <!-- ===== Ù†ÙˆØ§ÙØ° Ù…Ø´Ø±ÙˆØ· ===== -->
    <!-- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø´Ø£Ø© -->
    <div id="addFacilityModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                ğŸ¥ Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø´Ø£Ø© Ø¬Ø¯ÙŠØ¯Ø©
                <button class="modal-close" onclick="closeModal('addFacilityModal')">âœ•</button>
            </div>
            <form onsubmit="saveFacility(event)">
                <div class="form-group">
                    <label>ÙƒÙˆØ¯ Ø§Ù„Ù…Ù†Ø´Ø£Ø© *</label>
                    <input type="text" id="facilityCode" required>
                </div>
                <div class="form-group">
                    <label>Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø´Ø£Ø© *</label>
                    <input type="text" id="facilityName" required>
                </div>
                <div class="form-group">
                    <label>Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†Ø´Ø£Ø© *</label>
                    <select id="facilityType" required>
                        <option value="">-- Ø§Ø®ØªØ± --</option>
                        <option value="Ù…Ø³ØªØ´ÙÙ‰">Ù…Ø³ØªØ´ÙÙ‰</option>
                        <option value="Ø¹ÙŠØ§Ø¯Ø©">Ø¹ÙŠØ§Ø¯Ø©</option>
                        <option value="Ù…Ø±ÙƒØ² ØµØ­ÙŠ">Ù…Ø±ÙƒØ² ØµØ­ÙŠ</option>
                        <option value="ÙˆØ­Ø¯Ø© ØµØ­ÙŠØ©">ÙˆØ­Ø¯Ø© ØµØ­ÙŠØ©</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© *</label>
                        <input type="text" id="facilityCity" required>
                    </div>
                    <div class="form-group">
                        <label>Ø§Ù„Ù‡Ø§ØªÙ</label>
                        <input type="tel" id="facilityPhone">
                    </div>
                </div>
                <div class="form-group">
                    <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                    <input type="email" id="facilityEmail">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('addFacilityModal')">Ø¥Ù„ØºØ§Ø¡</button>
                    <button type="submit" class="btn btn-primary">ğŸ’¾ Ø­ÙØ¸</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù… -->
    <div id="addUserModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                ğŸ‘¤ Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯
                <button class="modal-close" onclick="closeModal('addUserModal')">âœ•</button>
            </div>
            <form onsubmit="saveUser(event)">
                <div class="form-group">
                    <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… *</label>
                    <input type="text" id="userName" required>
                </div>
                <div class="form-group">
                    <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ *</label>
                    <input type="email" id="userEmail" required>
                </div>
                <div class="form-group">
                    <label>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± *</label>
                    <input type="password" id="userPassword" required>
                </div>
                <div class="form-group">
                    <label>Ø§Ù„Ù…Ù†Ø´Ø£Ø© *</label>
                    <select id="userFacility" required>
                        <option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†Ø´Ø£Ø© --</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Ø§Ù„Ø¯ÙˆØ± *</label>
                    <select id="userRole" required>
                        <option value="admin">Ù…Ø¯ÙŠØ±</option>
                        <option value="supervisor">Ù…Ø´Ø±Ù</option>
                        <option value="user">Ù…Ø³ØªØ®Ø¯Ù…</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="userActive" checked>
                        Ø­Ø³Ø§Ø¨ Ù†Ø´Ø·
                    </label>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('addUserModal')">Ø¥Ù„ØºØ§Ø¡</button>
                    <button type="submit" class="btn btn-primary">ğŸ’¾ Ø­ÙØ¸</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„ Ù…Ø¤Ø´Ø± -->
    <div id="addKPIForm" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                ğŸ“ˆ Ø¥Ø¶Ø§ÙØ© / ØªØ¹Ø¯ÙŠÙ„ Ù…Ø¤Ø´Ø±
                <button class="modal-close" onclick="closeAddKPIForm()">âœ•</button>
            </div>
            <div class="form-group">
                <label>Ø§Ù„ÙƒÙˆØ¯ *</label>
                <input type="text" id="kpiCode" required>
            </div>
            <div class="form-group">
                <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø¤Ø´Ø± *</label>
                <input type="text" id="kpiName" required>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>Ø§Ù„ÙØ¦Ø© *</label>
                    <input type="text" id="kpiCategory" required>
                </div>
                <div class="form-group">
                    <label>Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¤Ø´Ø± *</label>
                    <input type="text" id="kpiType" required>
                </div>
            </div>
            <div class="form-group">
                <label>Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø©</label>
                <textarea id="kpiFormula" rows="3"></textarea>
            </div>
            <div class="form-group">
                <label>ØªØ¹Ù„ÙŠÙ…Ø§Øª ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</label>
                <textarea id="kpiInstructions" rows="3"></textarea>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeAddKPIForm()">Ø¥Ù„ØºØ§Ø¡</button>
                <button type="button" class="btn btn-primary" onclick="saveNewKPI()">ğŸ’¾ Ø­ÙØ¸</button>
            </div>
        </div>
    </div>

    <script>
        // ===== Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… =====
        let systemData = {
            currentUser: null,
            facilities: [],
            users: [],
            kpis: JSON.parse(localStorage.getItem("kpis")) || [],
            permissions: {},
            activityLog: []
        };

        // ===== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† localStorage =====
        function initializeSystem() {
            const savedData = localStorage.getItem('kpiSystemData');
            if (savedData) {
                const parsedData = JSON.parse(savedData);
                // Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª Ø¨Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© ÙÙŠ localStorage Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…ÙˆØ¬ÙˆØ¯Ø©
                if (systemData.kpis.length > 0) {
                    parsedData.kpis = systemData.kpis;
                }
                systemData = parsedData;
            } else {
                // Ø¨ÙŠØ§Ù†Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
                systemData.facilities = [
                    {
                        id: 1,
                        code: 'FAC001',
                        name: 'Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„Ø¹Ø§Ù…',
                        type: 'Ù…Ø³ØªØ´ÙÙ‰',
                        city: 'Ø§Ù„Ø±ÙŠØ§Ø¶',
                        phone: '0555555555',
                        email: 'general@hospital.sa',
                        status: 'active'
                    }
                ];

                systemData.users = [
                    {
                        id: 1,
                        name: 'Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…',
                        email: 'admin@system.com',
                        password: 'admin123',
                        facility: 1,
                        role: 'admin',
                        status: 'active',
                        registeredDate: new Date().toISOString()
                    }
                ];

                systemData.currentUser = systemData.users[0];
                
                // Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù‡Ù†Ø§Ùƒ Ù…Ø¤Ø´Ø±Ø§Øª Ù…Ø­ÙÙˆØ¸Ø©ØŒ Ù‚Ù… Ø¨ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
                if (systemData.kpis.length === 0) {
                    systemData.kpis = getAllKPIs();
                    localStorage.setItem("kpis", JSON.stringify(systemData.kpis));
                }
                
                saveData();
            }

            updateDashboard();
            loadFacilities();
            loadUsers();
            loadKPIs();
            loadPermissionUsers();
            loadReportFacilities();
        }

        // ===== Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª =====
        function saveData() {
            localStorage.setItem('kpiSystemData', JSON.stringify(systemData));
        }

        // ===== ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª =====
        function switchTab(tabName) {
            // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });

            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù€ active Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø²Ø±Ø§Ø±
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });

            // Ø¹Ø±Ø¶ Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…Ø®ØªØ§Ø±
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            // ØªØ­Ø¯ÙŠØ« Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØµÙØ­Ø©
            const titles = {
                dashboard: 'ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª',
                facilities: 'ğŸ¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†Ø´Ø¢Øª',
                users: 'ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†',
                kpis: 'ğŸ“ˆ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª',
                permissions: 'ğŸ”’ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª',
                reports: 'ğŸ“‹ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±'
            };
            document.getElementById('pageTitle').textContent = titles[tabName];
        }

        // ===== ØªØ­Ø¯ÙŠØ« Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª =====
        function updateDashboard() {
            document.getElementById('facilitiesCount').textContent = systemData.facilities.length;
            document.getElementById('usersCount').textContent = systemData.users.length;
            document.getElementById('kpisCount').textContent = systemData.kpis.length;
            document.getElementById('dataCount').textContent = 
                (JSON.parse(localStorage.getItem('kpiData') || '[]')).length;

            // Ø¹Ø±Ø¶ Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø£Ø®ÙŠØ±
            const activity = systemData.activityLog.slice(-5).reverse().map(log => 
                `<p>âœ… ${log.message} - <small>${new Date(log.timestamp).toLocaleString('ar-SA')}</small></p>`
            ).join('');
            
            document.getElementById('recentActivity').innerHTML = activity || 
                '<p style="text-align: center; color: #999;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ù†Ø´Ø·Ø© Ø¨Ø¹Ø¯</p>';
        }

        // ===== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†Ø´Ø¢Øª =====
        function openAddFacilityModal() {
            document.getElementById('addFacilityModal').classList.add('active');
        }

        function saveFacility(event) {
            event.preventDefault();

            const facility = {
                id: Math.max(...systemData.facilities.map(f => f.id), 0) + 1,
                code: document.getElementById('facilityCode').value,
                name: document.getElementById('facilityName').value,
                type: document.getElementById('facilityType').value,
                city: document.getElementById('facilityCity').value,
                phone: document.getElementById('facilityPhone').value,
                email: document.getElementById('facilityEmail').value,
                status: 'active'
            };

            systemData.facilities.push(facility);
            systemData.activityLog.push({
                message: `ØªÙ… Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø´Ø£Ø© Ø¬Ø¯ÙŠØ¯Ø©: ${facility.name}`,
                timestamp: new Date().toISOString()
            });

            saveData();
            loadFacilities();
            closeModal('addFacilityModal');
            document.getElementById('addFacilityModal').querySelector('form').reset();
            showAlert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†Ø´Ø£Ø© Ø¨Ù†Ø¬Ø§Ø­! âœ…');
            updateDashboard();
        }

        function loadFacilities() {
            const tbody = document.querySelector('#facilitiesTable tbody');
            tbody.innerHTML = systemData.facilities.map(f => `
                <tr>
                    <td>${f.code}</td>
                    <td>${f.name}</td>
                    <td>${f.type}</td>
                    <td>${f.city}</td>
                    <td>${systemData.users.filter(u => u.facility === f.id).length}</td>
                    <td><span class="status-badge status-active">${f.status === 'active' ? 'âœ… Ù†Ø´Ø·' : 'âŒ Ù…Ø¹Ø·Ù„'}</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn btn-small btn-primary" onclick="editFacility(${f.id})">âœï¸</button>
                            <button class="btn btn-small btn-danger" onclick="deleteFacility(${f.id})">ğŸ—‘ï¸</button>
                        </div>
                    </td>
                </tr>
            `).join('');

            // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø´Ø¢Øª ÙÙŠ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            const select = document.getElementById('userFacility');
            select.innerHTML = '<option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†Ø´Ø£Ø© --</option>' + 
                systemData.facilities.map(f => `<option value="${f.id}">${f.name}</option>`).join('');

            // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø´Ø¢Øª ÙÙŠ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±
            const reportSelect = document.getElementById('reportFacility');
            reportSelect.innerHTML = '<option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†Ø´Ø¢Øª</option>' + 
                systemData.facilities.map(f => `<option value="${f.id}">${f.name}</option>`).join('');
        }

        function editFacility(id) {
            const facility = systemData.facilities.find(f => f.id === id);
            if (facility) {
                document.getElementById('facilityCode').value = facility.code;
                document.getElementById('facilityName').value = facility.name;
                document.getElementById('facilityType').value = facility.type;
                document.getElementById('facilityCity').value = facility.city;
                document.getElementById('facilityPhone').value = facility.phone;
                document.getElementById('facilityEmail').value = facility.email;
                // Ø³ÙŠØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¹Ù„Ù‰ Ù†ÙØ³ Ø§Ù„Ù€ ID
                openAddFacilityModal();
            }
        }

        function deleteFacility(id) {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù†Ø´Ø£Ø©ØŸ')) {
                systemData.facilities = systemData.facilities.filter(f => f.id !== id);
                saveData();
                loadFacilities();
                showAlert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†Ø´Ø£Ø© Ø¨Ù†Ø¬Ø§Ø­! âœ…');
                updateDashboard();
            }
        }

        // ===== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† =====
        function openAddUserModal() {
            document.getElementById('addUserModal').classList.add('active');
        }

        function saveUser(event) {
            event.preventDefault();

            const user = {
                id: Math.max(...systemData.users.map(u => u.id), 0) + 1,
                name: document.getElementById('userName').value,
                email: document.getElementById('userEmail').value,
                password: document.getElementById('userPassword').value,
                facility: parseInt(document.getElementById('userFacility').value),
                role: document.getElementById('userRole').value,
                status: document.getElementById('userActive').checked ? 'active' : 'inactive',
                registeredDate: new Date().toISOString()
            };

            systemData.users.push(user);
            systemData.activityLog.push({
                message: `ØªÙ… Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯: ${user.name}`,
                timestamp: new Date().toISOString()
            });

            saveData();
            loadUsers();
            closeModal('addUserModal');
            document.getElementById('addUserModal').querySelector('form').reset();
            showAlert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­! âœ…');
            updateDashboard();
            loadPermissionUsers();
        }

        function loadUsers() {
            const tbody = document.querySelector('#usersTable tbody');
            tbody.innerHTML = systemData.users.map(u => {
                const facility = systemData.facilities.find(f => f.id === u.facility);
                const roleLabel = {
                    'admin': 'ğŸ”´ Ù…Ø¯ÙŠØ±',
                    'supervisor': 'ğŸŸ  Ù…Ø´Ø±Ù',
                    'user': 'ğŸŸ¢ Ù…Ø³ØªØ®Ø¯Ù…'
                };
                return `
                    <tr>
                        <td>${u.name}</td>
                        <td>${u.email}</td>
                        <td>${facility?.name || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</td>
                        <td><span class="status-badge status-${u.role === 'admin' ? 'admin' : 'user'}">${roleLabel[u.role]}</span></td>
                        <td>${new Date(u.registeredDate).toLocaleDateString('ar-SA')}</td>
                        <td><span class="status-badge ${u.status === 'active' ? 'status-active' : 'status-inactive'}">${u.status === 'active' ? 'âœ… Ù†Ø´Ø·' : 'âŒ Ù…Ø¹Ø·Ù„'}</span></td>
                        <td>
                            <div class="action-buttons">
                                <button class="btn btn-small btn-primary" onclick="editUser(${u.id})">âœï¸</button>
                                <button class="btn btn-small btn-danger" onclick="deleteUser(${u.id})">ğŸ—‘ï¸</button>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function editUser(id) {
            const user = systemData.users.find(u => u.id === id);
            if (user) {
                document.getElementById('userName').value = user.name;
                document.getElementById('userEmail').value = user.email;
                document.getElementById('userPassword').value = user.password;
                document.getElementById('userFacility').value = user.facility;
                document.getElementById('userRole').value = user.role;
                document.getElementById('userActive').checked = user.status === 'active';
                openAddUserModal();
            }
        }

        function deleteUser(id) {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŸ')) {
                const user = systemData.users.find(u => u.id === id);
                systemData.users = systemData.users.filter(u => u.id !== id);
                systemData.activityLog.push({
                    message: `ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${user.name}`,
                    timestamp: new Date().toISOString()
                });
                saveData();
                loadUsers();
                showAlert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­! âœ…');
                updateDashboard();
            }
        }

        // ===== Ø¯ÙˆØ§Ù„ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© =====

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„
        function loadKPIs(list = systemData.kpis) {
            const tbody = document.querySelector('#kpisTable tbody');
            if (!tbody) return;
            
            tbody.innerHTML = list.map(kpi => `
                <tr>
                    <td><strong>${kpi.code}</strong></td>
                    <td>
                        <div style="font-weight: 600;">${kpi.name}</div>
                        <small style="color: #666; font-size: 0.85em;">${kpi.formula || ''}</small>
                    </td>
                    <td><span style="background: #e3f2fd; padding: 4px 8px; border-radius: 4px; font-size: 0.9em;">${kpi.category}</span></td>
                    <td><span style="background: #e8f5e9; padding: 4px 8px; border-radius: 4px; font-size: 0.9em;">${kpi.type}</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn btn-small btn-primary" onclick="editKPI('${kpi.code}')">âœï¸ ØªØ¹Ø¯ÙŠÙ„</button>
                            <button class="btn btn-small btn-danger" onclick="deleteKPI('${kpi.code}')">ğŸ—‘ï¸ Ø­Ø°Ù</button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        // Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø°ÙƒÙŠ
        function searchKPIs() {
            const text = document.getElementById("kpiSearch").value.toLowerCase();

            const results = systemData.kpis.filter(kpi =>
                kpi.code.toLowerCase().includes(text) ||
                kpi.name.toLowerCase().includes(text) ||
                (kpi.category && kpi.category.toLowerCase().includes(text))
            );

            loadKPIs(results);
        }

        // Ø§Ù„ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø©
        function filterKPIs() {
            const cat = document.getElementById("categoryFilter").value;

            if (cat === "") {
                loadKPIs(systemData.kpis);
                return;
            }

            const filtered = systemData.kpis.filter(kpi => kpi.category === cat);
            loadKPIs(filtered);
        }

        // ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø¥Ø¶Ø§ÙØ© Ù…Ø¤Ø´Ø±
        function openAddKPIForm() {
            window.editingKPI = null;
            document.getElementById('kpiCode').value = '';
            document.getElementById('kpiName').value = '';
            document.getElementById('kpiCategory').value = '';
            document.getElementById('kpiType').value = '';
            document.getElementById('kpiFormula').value = '';
            document.getElementById('kpiInstructions').value = '';
            document.getElementById('addKPIForm').classList.add('active');
        }

        // ØºÙ„Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø©
        function closeAddKPIForm() {
            document.getElementById('addKPIForm').classList.remove('active');
            window.editingKPI = null;
        }

        // Ø­ÙØ¸/ØªØ¹Ø¯ÙŠÙ„ Ù…Ø¤Ø´Ø±
        function saveNewKPI() {
            const kpiData = {
                code: document.getElementById('kpiCode').value,
                name: document.getElementById('kpiName').value,
                category: document.getElementById('kpiCategory').value,
                type: document.getElementById('kpiType').value,
                formula: document.getElementById('kpiFormula').value,
                instructions: document.getElementById('kpiInstructions').value
            };

            if (window.editingKPI) {
                // ØªØ¹Ø¯ÙŠÙ„ Ù…Ø¤Ø´Ø± Ù…ÙˆØ¬ÙˆØ¯
                const index = systemData.kpis.findIndex(k => k.code === window.editingKPI);
                systemData.kpis[index] = kpiData;
            } else {
                // Ø¥Ø¶Ø§ÙØ© Ù…Ø¤Ø´Ø± Ø¬Ø¯ÙŠØ¯
                systemData.kpis.push(kpiData);
            }

            // Ø­ÙØ¸ ÙÙŠ localStorage
            localStorage.setItem("kpis", JSON.stringify(systemData.kpis));
            saveData(); // Ø­ÙØ¸ ÙÙŠ systemData Ø§Ù„Ø¹Ø§Ù…
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
            loadKPIs();
            closeAddKPIForm();
            showAlert('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ø¤Ø´Ø± Ø¨Ù†Ø¬Ø§Ø­! âœ…');
            
            // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù†Ø´Ø§Ø·
            systemData.activityLog.push({
                message: window.editingKPI ? 
                    `ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø¤Ø´Ø±: ${kpiData.code}` : 
                    `ØªÙ… Ø¥Ø¶Ø§ÙØ© Ù…Ø¤Ø´Ø± Ø¬Ø¯ÙŠØ¯: ${kpiData.code}`,
                timestamp: new Date().toISOString()
            });
            updateDashboard();
        }

        // ØªØ¹Ø¯ÙŠÙ„ Ù…Ø¤Ø´Ø±
        function editKPI(code) {
            const kpi = systemData.kpis.find(k => k.code === code);
            if (!kpi) return;
            
            window.editingKPI = code;
            
            document.getElementById('kpiCode').value = kpi.code;
            document.getElementById('kpiName').value = kpi.name;
            document.getElementById('kpiCategory').value = kpi.category;
            document.getElementById('kpiType').value = kpi.type;
            document.getElementById('kpiFormula').value = kpi.formula || '';
            document.getElementById('kpiInstructions').value = kpi.instructions || '';
            
            document.getElementById('addKPIForm').classList.add('active');
        }

        // Ø­Ø°Ù Ù…Ø¤Ø´Ø±
        function deleteKPI(code) {
            if (!confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¤Ø´Ø±ØŸ')) return;
            
            const kpi = systemData.kpis.find(k => k.code === code);
            systemData.kpis = systemData.kpis.filter(k => k.code !== code);
            
            // Ø­ÙØ¸ ÙÙŠ localStorage
            localStorage.setItem("kpis", JSON.stringify(systemData.kpis));
            saveData();
            
            loadKPIs();
            showAlert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø¤Ø´Ø± Ø¨Ù†Ø¬Ø§Ø­! âœ…');
            
            // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù†Ø´Ø§Ø·
            systemData.activityLog.push({
                message: `ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø¤Ø´Ø±: ${kpi.code} - ${kpi.name}`,
                timestamp: new Date().toISOString()
            });
            updateDashboard();
        }

        // ===== Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª =====
        function loadPermissionUsers() {
            const select = document.getElementById('permissionUser');
            select.innerHTML = '<option value="">-- Ø§Ø®ØªØ± Ù…Ø³ØªØ®Ø¯Ù…Ø§Ù‹ --</option>' + 
                systemData.users.map(u => `<option value="${u.id}">${u.name} (${u.role})</option>`).join('');
        }

        function loadUserPermissions() {
            const userId = parseInt(document.getElementById('permissionUser').value);
            const user = systemData.users.find(u => u.id === userId);
            
            if (!user) {
                document.getElementById('permissionsContainer').innerHTML = '';
                return;
            }

            const facilities = systemData.facilities.map(f => `
                <div class="form-group">
                    <label>
                        <input type="checkbox" class="permission-checkbox" data-user="${userId}" data-facility="${f.id}" 
                               ${user.facility === f.id ? 'checked' : ''}>
                        ${f.name}
                    </label>
                </div>
            `).join('');

            document.getElementById('permissionsContainer').innerHTML = `
                <div class="card">
                    <h3 style="margin-bottom: 20px;">ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…Ù†Ø´Ø¢Øª</h3>
                    ${facilities}
                    <button class="btn btn-primary" style="margin-top: 20px;" onclick="savePermissions(${userId})">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª</button>
                </div>
            `;
        }

        function savePermissions(userId) {
            const user = systemData.users.find(u => u.id === userId);
            const facilities = Array.from(document.querySelectorAll('.permission-checkbox:checked'))
                .map(cb => parseInt(cb.dataset.facility));
            
            if (facilities.length > 0) {
                user.facility = facilities[0]; // ØªØ¹ÙŠÙŠÙ† Ø£ÙˆÙ„ Ù…Ù†Ø´Ø£Ø©
                saveData();
                showAlert('ØªÙ… Ø­ÙØ¸ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø¨Ù†Ø¬Ø§Ø­! âœ…');
            } else {
                showAlert('ÙŠØ¬Ø¨ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù†Ø´Ø£Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„!', 'warning');
            }
        }

        // ===== Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± =====
        function loadReportFacilities() {
            const select = document.getElementById('reportFacility');
            if (select) {
                select.innerHTML = '<option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†Ø´Ø¢Øª</option>' + 
                    systemData.facilities.map(f => `<option value="${f.id}">${f.name}</option>`).join('');
            }
        }

        function generateReport() {
            const reportType = document.getElementById('reportType').value;
            const facilityId = document.getElementById('reportFacility').value;

            let reportContent = `
                <div class="alert alert-success">
                    ğŸ“Š ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­
                </div>
                <div style="background: white; padding: 20px; border-radius: 8px;">
            `;

            switch(reportType) {
                case 'facilities':
                    reportContent += '<h3>ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ù†Ø´Ø¢Øª</h3>';
                    reportContent += '<table style="width: 100%; border-collapse: collapse;">';
                    reportContent += '<tr><th style="border: 1px solid #ddd; padding: 8px;">Ø§Ù„ÙƒÙˆØ¯</th><th style="border: 1px solid #ddd; padding: 8px;">Ø§Ù„Ø§Ø³Ù…</th><th style="border: 1px solid #ddd; padding: 8px;">Ø§Ù„Ù†ÙˆØ¹</th><th style="border: 1px solid #ddd; padding: 8px;">Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</th></tr>';
                    systemData.facilities.forEach(f => {
                        reportContent += `<tr><td style="border: 1px solid #ddd; padding: 8px;">${f.code}</td><td style="border: 1px solid #ddd; padding: 8px;">${f.name}</td><td style="border: 1px solid #ddd; padding: 8px;">${f.type}</td><td style="border: 1px solid #ddd; padding: 8px;">${f.city}</td></tr>`;
                    });
                    reportContent += '</table>';
                    break;
                case 'users':
                    reportContent += '<h3>ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h3>';
                    reportContent += '<table style="width: 100%; border-collapse: collapse;">';
                    reportContent += '<tr><th style="border: 1px solid #ddd; padding: 8px;">Ø§Ù„Ø§Ø³Ù…</th><th style="border: 1px solid #ddd; padding: 8px;">Ø§Ù„Ø¨Ø±ÙŠØ¯</th><th style="border: 1px solid #ddd; padding: 8px;">Ø§Ù„Ø¯ÙˆØ±</th><th style="border: 1px solid #ddd; padding: 8px;">Ø§Ù„Ø­Ø§Ù„Ø©</th></tr>';
                    systemData.users.forEach(u => {
                        reportContent += `<tr><td style="border: 1px solid #ddd; padding: 8px;">${u.name}</td><td style="border: 1px solid #ddd; padding: 8px;">${u.email}</td><td style="border: 1px solid #ddd; padding: 8px;">${u.role}</td><td style="border: 1px solid #ddd; padding: 8px;">${u.status}</td></tr>`;
                    });
                    reportContent += '</table>';
                    break;
                case 'kpis':
                    reportContent += '<h3>ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª</h3>';
                    reportContent += '<table style="width: 100%; border-collapse: collapse;">';
                    reportContent += '<tr><th style="border: 1px solid #ddd; padding: 8px;">Ø§Ù„ÙƒÙˆØ¯</th><th style="border: 1px solid #ddd; padding: 8px;">Ø§Ù„Ø§Ø³Ù…</th><th style="border: 1px solid #ddd; padding: 8px;">Ø§Ù„ÙØ¦Ø©</th><th style="border: 1px solid #ddd; padding: 8px;">Ø§Ù„Ù†ÙˆØ¹</th></tr>';
                    systemData.kpis.forEach(k => {
                        reportContent += `<tr><td style="border: 1px solid #ddd; padding: 8px;">${k.code}</td><td style="border: 1px solid #ddd; padding: 8px;">${k.name}</td><td style="border: 1px solid #ddd; padding: 8px;">${k.category}</td><td style="border: 1px solid #ddd; padding: 8px;">${k.type}</td></tr>`;
                    });
                    reportContent += '</table>';
                    break;
            }

            reportContent += '</div>';

            // Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø±ÙŠØ± ÙÙŠ Ù†Ø§ÙØ°Ø© Ø¬Ø¯ÙŠØ¯Ø©
            const reportWindow = window.open('', 'Report');
            reportWindow.document.write(reportContent);
        }

        function exportReport() {
            const reportType = document.getElementById('reportType').value;
            let csv = '';

            if (reportType === 'facilities') {
                csv = 'Ø§Ù„ÙƒÙˆØ¯,Ø§Ù„Ø§Ø³Ù…,Ø§Ù„Ù†ÙˆØ¹,Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©\n';
                systemData.facilities.forEach(f => {
                    csv += `"${f.code}","${f.name}","${f.type}","${f.city}"\n`;
                });
            } else if (reportType === 'users') {
                csv = 'Ø§Ù„Ø§Ø³Ù…,Ø§Ù„Ø¨Ø±ÙŠØ¯,Ø§Ù„Ø¯ÙˆØ±,Ø§Ù„Ø­Ø§Ù„Ø©\n';
                systemData.users.forEach(u => {
                    csv += `"${u.name}","${u.email}","${u.role}","${u.status}"\n`;
                });
            } else if (reportType === 'kpis') {
                csv = 'Ø§Ù„ÙƒÙˆØ¯,Ø§Ù„Ø§Ø³Ù…,Ø§Ù„ÙØ¦Ø©,Ø§Ù„Ù†ÙˆØ¹\n';
                systemData.kpis.forEach(k => {
                    csv += `"${k.code}","${k.name}","${k.category}","${k.type}"\n`;
                });
            }

            const blob = new Blob(['ï»¿' + csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `ØªÙ‚Ø±ÙŠØ±_${reportType}_${new Date().toISOString().split('T')[0]}.csv`;
            link.click();
        }

        // ===== Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø§Øª =====
        function openModal(id) {
            document.getElementById(id).classList.add('active');
        }

        function closeModal(id) {
            document.getElementById(id).classList.remove('active');
        }

        function showAlert(message, type = 'success') {
            const alertClass = type === 'success' ? 'alert-success' : 'alert-warning';
            const alert = document.createElement('div');
            alert.className = `alert ${alertClass}`;
            alert.innerHTML = `<span>${message}</span>`;
            document.querySelector('.main-content').insertBefore(alert, document.querySelector('.header').nextSibling);
            
            setTimeout(() => alert.remove(), 3000);
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.style.width = sidebar.style.width === '0px' ? '280px' : '0px';
        }

        function logout() {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ')) {
                localStorage.removeItem('kpiSystemData');
                window.location.reload();
            }
        }

        // ===== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… =====
        window.addEventListener('load', initializeSystem);

        // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©
        setInterval(saveData, 60000);
    </script>
    <script>

function getAllKPIs() {
    return [

        {
            code: "WFM-01",
            name: "Ù†Ø³Ø¨Ø© ØªÙ†ÙÙŠØ° Ø§Ù„Ø¯ÙˆØ±Ø§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠØ© Ø§Ù„Ù…Ø¯Ø±Ø¬Ø© Ø¨Ø§Ù„Ø®Ø·Ø©",
            category: "WFM",
            type: "Ù†Ø³Ø¨Ø©",
            formula: "(Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¹Ø¯Ø¯ Ø§Ù„Ø¯ÙˆØ±Ø§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠØ© Ø§Ù„Ù…Ù†ÙØ°Ø© ÙØ¹Ù„ÙŠØ§Ù‹ Ã— 100) / Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¹Ø¯Ø¯ Ø§Ù„Ø¯ÙˆØ±Ø§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠØ© Ø§Ù„Ù…Ø¯Ø±Ø¬Ø© Ø¨Ø§Ù„Ø®Ø·Ø©",
            instructions: "Ø§Ù„Ù…Ø³ØªØ¨Ø¹Ø¯: Ø§Ù„Ø¯ÙˆØ±Ø§Øª Ø§Ù„ØºÙŠØ± Ù…Ø¯Ø±Ø¬Ø© Ø¨Ø§Ù„Ø®Ø·Ø© - Ø§Ù„Ø¯ÙˆØ±Ø§Øª ØºÙŠØ± Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©"
        },

        {
            code: "WFM-02",
            name: "Ù†Ø³Ø¨Ø© Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø¨Ø§Ù„Ø­Ø¶ÙˆØ± Ù„Ù„Ø¯ÙˆØ±Ø§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠØ©",
            category: "WFM",
            type: "Ù†Ø³Ø¨Ø©",
            formula: "(Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØªØ¯Ø±Ø¨ÙŠÙ† Ø§Ù„Ø°ÙŠÙ† Ø§Ù„ØªØ²Ù…ÙˆØ§ Ø¨Ø§Ù„Ø­Ø¶ÙˆØ± Ã— 100) / Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØªØ¯Ø±Ø¨ÙŠÙ† Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙÙŠÙ†",
            instructions: "Ø§Ù„Ù…Ø³ØªØ¨Ø¹Ø¯: Ø§Ù„Ø¹Ø§Ù…Ù„ÙŠÙ† Ø§Ù„Ø°ÙŠÙ† Ù„Ù… ÙŠØ³ØªÙƒÙ…Ù„ÙˆØ§ Ø§Ù„Ø¯ÙˆØ±Ø§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠØ©"
        },

        {
            code: "WFM-03",
            name: "Ù†Ø³Ø¨Ø© Ø§Ø¬ØªÙŠØ§Ø² Ø§Ù„Ù…ØªØ¯Ø±Ø¨ÙŠÙ† Ù„Ù„Ø¯ÙˆØ±Ø§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠØ©",
            category: "WFM",
            type: "Ù†Ø³Ø¨Ø©",
            formula: "(Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØªØ¯Ø±Ø¨ÙŠÙ† Ø§Ù„Ø°ÙŠÙ† Ø§Ø¬ØªØ§Ø²ÙˆØ§ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ã— 100) / Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØªØ¯Ø±Ø¨ÙŠÙ† Ø§Ù„Ø°ÙŠÙ† Ø­Ø¶Ø±ÙˆØ§",
            instructions: "Ø§Ù„Ù…Ø³ØªØ¨Ø¹Ø¯: Ø§Ù„Ø¹Ø§Ù…Ù„ÙŠÙ† Ø§Ù„Ø°ÙŠÙ† Ù„Ù… ÙŠØ³ØªÙƒÙ…Ù„ÙˆØ§ Ø§Ù„Ø¯ÙˆØ±Ø§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠØ©"
        },

        {
            code: "WFM-04",
            name: "Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¯ÙˆØ±Ø§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠØ© Ø§Ù„ØªÙŠ Ø­ØµÙ„ Ø¹Ù„ÙŠÙ‡Ø§ ÙƒÙ„ Ù…ÙˆØ¸Ù Ø³Ù†ÙˆÙŠØ§Ù‹",
            category: "WFM",
            type: "Ù…Ø¹Ø¯Ù„",
            formula: "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØªØ¯Ø±Ø¨ÙŠÙ† ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¯ÙˆØ±Ø§Øª Ø§Ù„Ù…Ù†ÙØ°Ø© / Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ø§Ù…Ù„ÙŠÙ†",
            instructions: "Ø§Ù„Ù…Ø³ØªØ¨Ø¹Ø¯: Ø§Ù„Ø¹Ø§Ù…Ù„ÙŠÙ† Ø§Ù„Ø¬Ø¯Ø¯ (3 Ø´Ù‡ÙˆØ±)"
        },

        {
            code: "WFM-05",
            name: "Ù†Ø³Ø¨Ø© Ø§Ù„Ø¹Ø§Ù…Ù„ÙŠÙ† Ø§Ù„ØµØ­ÙŠÙŠÙ† Ø§Ù„Ù…Ø¯Ø±Ø¨ÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ù†Ø¹Ø§Ø´ Ø§Ù„Ù‚Ù„Ø¨ÙŠ Ø§Ù„Ø±Ø¦ÙˆÙŠ (BLS)",
            category: "WFM",
            type: "Ù†Ø³Ø¨Ø©",
            formula: "(Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ø§Ù…Ù„ÙŠÙ† Ø§Ù„ØµØ­ÙŠÙŠÙ† Ø§Ù„Ù…Ø¯Ø±Ø¨ÙŠÙ† Ø¹Ù„Ù‰ BLS Ã— 100) / Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ø§Ù…Ù„ÙŠÙ† Ø§Ù„ØµØ­ÙŠÙŠÙ† Ø¨Ø§Ù„Ù…Ù†Ø´Ø£Ø©",
            instructions: "Ø§Ù„Ù…Ø³ØªØ¨Ø¹Ø¯: Ø§Ù„Ù…ØªØ¯Ø±Ø¨ÙŠÙ† Ø¨Ø¬Ù‡Ø§Øª ØºÙŠØ± Ù…Ø¹ØªÙ…Ø¯Ø© - Ø§Ù„Ù…ØªØ¯Ø±Ø¨ÙŠÙ† Ø§Ù„Ø°ÙŠÙ† Ù…Ø¶Ù‰ Ø¹Ù„Ù‰ ØªØ¯Ø±ÙŠØ¨Ù‡Ù… Ø£ÙƒØ«Ø± Ù…Ù† Ø³Ù†ØªÙŠÙ†"
        },

        {
            code: "WFM-06",
            name: "Ù†Ø³Ø¨Ø© Ø§Ù„Ø¹Ø§Ù…Ù„ÙŠÙ† Ø§Ù„Ù…Ø¯Ø±Ø¨ÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…Ø¯Ù†ÙŠØ©",
            category: "WFM",
            type: "Ù†Ø³Ø¨Ø©",
            formula: "(Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ø§Ù…Ù„ÙŠÙ† Ø§Ù„Ù…Ø¯Ø±Ø¨ÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…Ø¯Ù†ÙŠØ© Ã— 100) / Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ø§Ù…Ù„ÙŠÙ† Ø¨Ø§Ù„Ù…Ù†Ø´Ø£Ø©",
            instructions: "Ø§Ù„Ù…Ø³ØªØ¨Ø¹Ø¯: Ø§Ù„Ù…ØªØ¯Ø±Ø¨ÙŠÙ† Ø¨Ø¬Ù‡Ø§Øª ØºÙŠØ± Ù…Ø¹ØªÙ…Ø¯Ø© - Ø§Ù„Ù…ØªØ¯Ø±Ø¨ÙŠÙ† Ø§Ù„Ø°ÙŠÙ† Ù…Ø¶Ù‰ Ø¹Ù„Ù‰ ØªØ¯Ø±ÙŠØ¨Ù‡Ù… Ø£ÙƒØ«Ø± Ù…Ù† Ø³Ù†ØªÙŠÙ†"
        },

        {
            code: "WFM-07",
            name: "Ù†Ø³Ø¨Ø© Ø£Ø·Ø¨Ø§Ø¡ Ø§Ù„ØªØ®ØµØµØ§Øª Ø§Ù„Ø­Ø±Ø¬Ø© Ø§Ù„Ù…Ø¯Ø±Ø¨ÙŠÙ† Ø¹Ù„Ù‰ 3 Ø£Ø¯Ù„Ø© Ø¹Ù…Ù„ Ø¥ÙƒÙ„ÙŠÙ†ÙŠÙƒÙŠØ©",
            category: "WFM",
            type: "Ù†Ø³Ø¨Ø©",
            formula: "(Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¹Ø¯Ø¯ Ø£Ø·Ø¨Ø§Ø¡ Ø§Ù„ØªØ®ØµØµØ§Øª Ø§Ù„Ø­Ø±Ø¬Ø© Ø§Ù„Ù…Ø¯Ø±Ø¨ÙŠÙ† Ã— 100) / Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¹Ø¯Ø¯ Ø£Ø·Ø¨Ø§Ø¡ Ø§Ù„ØªØ®ØµØµØ§Øª Ø§Ù„Ø­Ø±Ø¬Ø©",
            instructions: "Ø§Ù„Ù…Ø³ØªØ¨Ø¹Ø¯: Ù…Ù† ØªÙ… ØªØ¯Ø±ÙŠØ¨Ù‡Ù… Ø¹Ù„Ù‰ Ø£Ù‚Ù„ Ù…Ù† 3 Ø£Ø¯Ù„Ø©"
        },

        {
            code: "WFM-08",
            name: "Ù†Ø³Ø¨Ø© Ø£Ø·Ø¨Ø§Ø¡ Ø§Ù„ØªØ®ØµØµØ§Øª Ø§Ù„Ø­Ø±Ø¬Ø© Ø§Ù„Ù…Ø¯Ø±Ø¨ÙŠÙ† Ø¹Ù„Ù‰ ACLS",
            category: "WFM",
            type: "Ù†Ø³Ø¨Ø©",
            formula: "(Ø¹Ø¯Ø¯ Ø£Ø·Ø¨Ø§Ø¡ Ø§Ù„ØªØ®ØµØµØ§Øª Ø§Ù„Ø­Ø±Ø¬Ø© Ø§Ù„Ù…Ø¯Ø±Ø¨ÙŠÙ† Ø¹Ù„Ù‰ ACLS Ã— 100) / Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¹Ø¯Ø¯ Ø£Ø·Ø¨Ø§Ø¡ Ø§Ù„ØªØ®ØµØµØ§Øª Ø§Ù„Ø­Ø±Ø¬Ø©",
            instructions: "Ø§Ù„Ù…Ø³ØªØ¨Ø¹Ø¯: Ø§Ù„Ù…ØªØ¯Ø±Ø¨ÙŠÙ† Ø¨Ø¬Ù‡Ø§Øª ØºÙŠØ± Ù…Ø¹ØªÙ…Ø¯Ø© - Ø§Ù„Ù…ØªØ¯Ø±Ø¨ÙŠÙ† Ø§Ù„Ø°ÙŠÙ† Ù…Ø¶Ù‰ Ø¹Ù„Ù‰ ØªØ¯Ø±ÙŠØ¨Ù‡Ù… Ø£ÙƒØ«Ø± Ù…Ù† Ø³Ù†ØªÙŠÙ†"
        },

        {
            code: "WFM-09",
            name: "Ù†Ø³Ø¨Ø© Ù…Ù‚Ø¯Ù…ÙŠ Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø¯Ø±Ø¨ÙŠÙ† Ø¹Ù„Ù‰ Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø±Ø¹Ø§ÙŠØ© Ø§Ù„Ø£ÙˆÙ„ÙŠØ©",
            category: "WFM",
            type: "Ù†Ø³Ø¨Ø©",
            formula: "(Ø¹Ø¯Ø¯ Ù…Ù‚Ø¯Ù…ÙŠ Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ø°ÙŠÙ† ØªÙ… ØªØ¯Ø±ÙŠØ¨Ù‡Ù… ÙØ¹Ù„ÙŠØ§Ù‹ Ã— 100) / Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¹Ø¯Ø¯ Ù…Ù‚Ø¯Ù…ÙŠ Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù ØªØ¯Ø±ÙŠØ¨Ù‡Ù…",
            instructions: "Ø§Ù„Ù…Ø³ØªØ¨Ø¹Ø¯: Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙˆÙ† Ø§Ù„Ø°ÙŠÙ† Ù„Ù… ÙŠØ¬ØªØ§Ø²ÙˆØ§ Ø§Ù„ØªØ¯Ø±ÙŠØ¨"
        },

        {
            code: "WFM-10",
            name: "Ù†Ø³Ø¨Ø© ØªØºØ·ÙŠØ© Ø§Ù„Ø¹Ø§Ù…Ù„ÙŠÙ† Ø¨Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø¹Ù„Ù‰ Ù…Ø®Ø§Ø·Ø± Ø¨ÙŠØ¦Ø© Ø§Ù„Ø¹Ù…Ù„",
            category: "WFM",
            type: "Ù†Ø³Ø¨Ø©",
            formula: "(Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ø§Ù…Ù„ÙŠÙ† Ø§Ù„Ø°ÙŠÙ† ØªÙ„Ù‚ÙˆØ§ ØªØ¯Ø±ÙŠØ¨Ù‹Ø§ Ù…ÙˆØ«Ù‚Ù‹Ø§ Ã— 100) / Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ø§Ù…Ù„ÙŠÙ† ÙÙŠ Ø§Ù„Ù…Ù†Ø´Ø£Ø©",
            instructions: "Ø§Ù„Ù…Ø³ØªØ¨Ø¹Ø¯: Ø§Ù„Ø¹Ø§Ù…Ù„ÙŠÙ† Ø§Ù„Ø¬Ø¯Ø¯ (3 Ø´Ù‡ÙˆØ±)"
        },

        {
            code: "WFM-11",
            name: "ØªÙ†Ø§Ø³Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ¶ Ø¥Ù„Ù‰ Ø¹Ø¯Ø¯ Ù…Ø§ÙƒÙŠÙ†Ø§Øª Ø§Ù„ØºØ³ÙŠÙ„ Ø§Ù„ÙƒÙ„ÙˆÙŠ",
            category: "WFM",
            type: "ØªÙ†Ø§Ø³Ø¨",
            formula: "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¹Ø¯Ø¯ ØªÙ…Ø±ÙŠØ¶ Ø§Ù„ØºØ³ÙŠÙ„ Ø§Ù„ÙƒÙ„ÙˆÙŠ / Ø¹Ø¯Ø¯ Ù…Ø±Ø¶Ù‰ Ø§Ù„ØºØ³ÙŠÙ„ Ø§Ù„ÙƒÙ„ÙˆÙŠ",
            instructions: "Ø§Ù„Ù…Ø³ØªØ¨Ø¹Ø¯: Ø£ÙØ±Ø§Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ¶ ØªØ­Øª Ø§Ù„ØªØ¯Ø±ÙŠØ¨"
        },

        {
            code: "WFM-12",
            name: "ØªÙ†Ø§Ø³Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ¶ Ø¥Ù„Ù‰ Ø¹Ø¯Ø¯ Ø£Ø³Ø±Ø© Ø§Ù„Ø±Ø¹Ø§ÙŠØ© Ø§Ù„Ù…Ø±ÙƒØ²Ø©",
            category: "WFM",
            type: "ØªÙ†Ø§Ø³Ø¨",
            formula: "Ù…ØªÙˆØ³Ø· Ø¹Ø¯Ø¯ ØªÙ…Ø±ÙŠØ¶ Ø§Ù„Ø´ÙØª / Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø£Ø³Ø±Ø© Ø§Ù„Ø±Ø¹Ø§ÙŠØ© Ø§Ù„Ù…Ø±ÙƒØ²Ø©",
            instructions: "Ø§Ù„Ù…Ø³ØªØ¨Ø¹Ø¯: Ø§Ù„Ø£Ø³Ø±Ø© Ø®Ø§Ø±Ø¬ Ø§Ù„Ø®Ø¯Ù…Ø©"
        },

        {
            code: "WFM-13",
            name: "ØªÙ†Ø§Ø³Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ¶ Ø¥Ù„Ù‰ Ø¹Ø¯Ø¯ Ø£Ø³Ø±Ø© Ø§Ù„Ø­Ø¶Ø§Ù†Ø§Øª",
            category: "WFM",
            type: "ØªÙ†Ø§Ø³Ø¨",
            formula: "Ù…ØªÙˆØ³Ø· Ø¹Ø¯Ø¯ ØªÙ…Ø±ÙŠØ¶ Ø§Ù„Ø´ÙØª / Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø¶Ø§Ù†Ø§Øª",
            instructions: "Ø§Ù„Ù…Ø³ØªØ¨Ø¹Ø¯: Ø§Ù„Ø­Ø¶Ø§Ù†Ø§Øª Ø®Ø§Ø±Ø¬ Ø§Ù„Ø®Ø¯Ù…Ø©"
        },

        {
            code: "WFM-14",
            name: "ØªÙ†Ø§Ø³Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ¶ Ø¥Ù„Ù‰ Ø¹Ø¯Ø¯ Ø£Ø³Ø±Ø© Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ",
            category: "WFM",
            type: "ØªÙ†Ø§Ø³Ø¨",
            formula: "Ù…ØªÙˆØ³Ø· Ø¹Ø¯Ø¯ ØªÙ…Ø±ÙŠØ¶ Ø§Ù„Ø´ÙØª / Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¹Ø¯Ø¯ Ø£Ø³Ø±Ø© Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ",
            instructions: "Ø§Ù„Ù…Ø³ØªØ¨Ø¹Ø¯: Ø§Ù„Ø£Ø³Ø±Ø© Ø®Ø§Ø±Ø¬ Ø§Ù„Ø®Ø¯Ù…Ø©"
        },

        {
            code: "WFM-15",
            name: "ØªÙ†Ø§Ø³Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ¶ Ø¥Ù„Ù‰ Ø¹Ø¯Ø¯ Ø·Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª",
            category: "WFM",
            type: "ØªÙ†Ø§Ø³Ø¨",
            formula: "Ù…ØªÙˆØ³Ø· Ø¹Ø¯Ø¯ ØªÙ…Ø±ÙŠØ¶ Ø§Ù„Ø´ÙØª / Ø¹Ø¯Ø¯ Ø·Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª",
            instructions: "Ø§Ù„Ù…Ø³ØªØ¨Ø¹Ø¯: Ø§Ù„Ø·Ø§ÙˆÙ„Ø§Øª Ø®Ø§Ø±Ø¬ Ø§Ù„Ø®Ø¯Ù…Ø©"
        },

        {
            code: "WFM-16",
            name: "ØªÙ†Ø§Ø³Ø¨ Ø¹Ø¯Ø¯ ØªÙ…Ø±ÙŠØ¶ Ø§Ù„Ø±Ø¹Ø§ÙŠØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø¥Ù„Ù‰ Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙƒØ§Ù†",
            category: "WFM",
            type: "ØªÙ†Ø§Ø³Ø¨",
            formula: "(Ø¹Ø¯Ø¯ ØªÙ…Ø±ÙŠØ¶ Ø§Ù„Ø±Ø¹Ø§ÙŠØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© / Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙƒØ§Ù†) Ã— 10,000",
            instructions: "Ø§Ù„Ù…Ø³ØªØ¨Ø¹Ø¯: Ø£ÙØ±Ø§Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ¶ ØªØ­Øª Ø§Ù„ØªØ¯Ø±ÙŠØ¨"
        },

        {
            code: "WFM-17",
            name: "ØªÙ†Ø§Ø³Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø·Ø¨Ø§Ø¡ Ø§Ù„Ù…Ù‚ÙŠÙ…ÙŠÙ† Ø¥Ù„Ù‰ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø±Ø© Ø¨Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©",
            category: "WFM",
            type: "ØªÙ†Ø§Ø³Ø¨",
            formula: "Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø·Ø¨Ø§Ø¡ Ø§Ù„Ù…Ù‚ÙŠÙ…ÙŠÙ† / Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø±Ø© Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©",
            instructions: "Ø§Ù„Ù…Ø³ØªØ¨Ø¹Ø¯: Ø£Ø·Ø¨Ø§Ø¡ Ø§Ù„Ø§Ù…ØªÙŠØ§Ø²"
        },

        {
            code: "WFM-18",
            name: "Ù†Ø³Ø¨Ø© ØªÙˆØ§ÙØ± Ø£Ø·Ø¨Ø§Ø¡ Ø§Ù„ØªØ®ØµØµØ§Øª Ø§Ù„Ø­Ø±Ø¬Ø© Ø·Ø¨Ù‚Ø§Ù‹ Ù„Ø®Ø·Ø© Ø§Ù„Ø¹Ù…Ø§Ù„Ø©",
            category: "WFM",
            type: "Ù†Ø³Ø¨Ø©",
            formula: "(Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¹Ø¯Ø¯ Ø£Ø·Ø¨Ø§Ø¡ Ø§Ù„ØªØ®ØµØµØ§Øª Ø§Ù„Ø­Ø±Ø¬Ø© Ã— 100) / Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨",
            instructions: "Ù„Ø§ ÙŠÙˆØ¬Ø¯"
        },

        {
            code: "WFM-19",
            name: "ØªÙ†Ø§Ø³Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ¶ Ø¥Ù„Ù‰ Ø¹Ø¯Ø¯ ØºØ±Ù Ø§Ù„Ø¹ÙŠØ§Ø¯Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©",
            category: "WFM",
            type: "ØªÙ†Ø§Ø³Ø¨",
            formula: "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¹Ø¯Ø¯ ØªÙ…Ø±ÙŠØ¶ Ø§Ù„Ø¹ÙŠØ§Ø¯Ø§Øª / Ø¹Ø¯Ø¯ ØºØ±Ù Ø§Ù„Ø¹ÙŠØ§Ø¯Ø§Øª",
            instructions: "Ù„Ø§ ÙŠÙˆØ¬Ø¯"
        },

        {
            code: "WFM-20",
            name: "ØªÙ†Ø§Ø³Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ¶ Ø¥Ù„Ù‰ ØºØ±Ù Ù‚Ø³Ù… Ø§Ù„Ø·ÙˆØ§Ø±Ø¦",
            category: "WFM",
            type: "ØªÙ†Ø§Ø³Ø¨",
            formula: "Ù…ØªÙˆØ³Ø· Ø¹Ø¯Ø¯ ØªÙ…Ø±ÙŠØ¶ Ø§Ù„Ø´ÙØª / Ø¹Ø¯Ø¯ ØºØ±Ù Ø§Ù„Ø·ÙˆØ§Ø±Ø¦",
            instructions: "Ù„Ø§ ÙŠÙˆØ¬Ø¯"
        }

    ];
}

</script>

</body>
</html>
